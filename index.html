<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Willowdale Basketball - 80's Edition</title>
    <!-- 80's fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Bangers&family=Permanent+Marker&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- 80's basketball icon CDN (Font Awesome 6) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root {
            --primary: #FF8200;
            --secondary: #00CFFF;
            --accent: #FF2D6F;
            --bg-dark: #15043b;
            --gold: #FFD700;
            --purple: #7C2AE8;
            --white: #FFFFFF;
            --black: #000000;
        }
        body {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--black);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        body::before {
            content: "";
            position: fixed;
            left: 0; top: 0;
            width: 100vw; height: 100vh;
            background: url('https://www.transparenttextures.com/patterns/halftone.png') repeat;
            opacity: 0.18;
            pointer-events: none;
            z-index: 0;
        }
        header {
            background: linear-gradient(90deg, var(--purple), var(--primary), var(--accent));
            color: var(--gold);
            text-shadow: 3px 3px 0 var(--black), 0 0 8px var(--accent);
            font-family: 'Bungee', 'Bangers', 'Permanent Marker', cursive;
            padding: 20px 0 14px 0;
            border-bottom: 5px solid var(--gold);
            box-shadow: 0 8px 32px 0 var(--gold);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        header h1 {
            font-size: 3em;
            letter-spacing: 4px;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        header h1 .fa-basketball {
            margin-right: 16px;
            color: var(--accent);
            font-size: 1.2em;
            text-shadow: 0 0 12px var(--primary);
        }
        #hamburger {
            display: block;
            cursor: pointer;
            font-size: 2em;
            color: var(--gold);
            background: var(--accent);
            border-radius: 8px;
            padding: 0 12px;
            margin-left: 12px;
            box-shadow: 0 2px 8px var(--primary);
        }
        nav {
            display: none;
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            background: linear-gradient(90deg, var(--accent) 0%, var(--secondary) 100%);
            border-radius: 0 0 24px 24px;
            box-shadow: 0 2px 16px var(--black);
            display: flex;
            flex-direction: column;
        }
        nav ul li {
            margin: 18px 0;
            text-align: center;
        }
        nav ul li a, nav ul li button {
            font-family: 'Bangers','Permanent Marker', cursive;
            color: var(--gold);
            background: var(--purple);
            border: 3px solid var(--accent);
            text-decoration: none;
            font-size: 1.15em;
            padding: 12px 32px;
            border-radius: 12px;
            box-shadow: 0 0 12px var(--accent);
            margin: 0 8px;
            transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        }
        nav ul li a:hover, nav ul li button:hover {
            color: var(--white);
            background: var(--accent);
            box-shadow: 0 0 24px var(--gold);
        }
        @media (min-width: 768px) {
            #hamburger { display: none; }
            nav { display: block; }
            nav ul { flex-direction: row; justify-content: center; }
            nav ul li { margin: 0 12px; }
        }
        /* Neon Card Style */
        .card {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            border-radius: 16px;
            box-shadow: 0 0 24px var(--accent), 0 4px 24px var(--black);
            border: 4px solid var(--gold);
            color: var(--black);
            font-family: 'Bangers', cursive;
            padding: 20px;
            margin: 18px 0;
        }
        .card h3 { color: var(--accent); text-shadow: 2px 2px 0 var(--gold); }
        .card img { border-radius: 12px; border: 2px solid var(--accent); box-shadow: 0 0 16px var(--primary); }

        /* YouTube container */
        .youtube-container {
            display: flex;
            flex-direction: row;
            gap: 24px;
            margin: 28px 0;
            justify-content: center;
        }
        .youtube-video {
            flex: 1 1 320px;
            max-width: 480px;
            min-width: 220px;
            background: var(--black);
            border-radius: 16px;
            padding: 10px;
            border: 3px solid var(--accent);
            box-shadow: 0 0 24px var(--secondary);
        }
        .youtube-video div {
            text-align: center;
            color: var(--gold);
            font-family: 'Bangers', cursive;
            margin-top: 6px;
        }
        /* Schedule Table */
        .schedule-table-container {
            margin: 34px 0 10px 0;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 16px;
            padding: 18px;
            box-shadow: 0 2px 12px var(--accent);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 12px var(--accent);
            margin-top: 8px;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 2px dashed var(--primary);
            color: var(--black);
            font-family: 'Roboto', Arial, sans-serif;
            font-size: 1.05em;
        }
        th {
            background: var(--purple);
            color: var(--gold);
            font-family: 'Bungee','Bangers',cursive;
            border-bottom: 3px solid var(--gold);
        }
        tr.past-game { background: #ffe8e8; }
        tr.future-game { background: #e8f5ff; }
        /* Inputs */
        input, textarea, button {
            font-family: 'Roboto', Arial, sans-serif;
            font-size: 1em;
            margin: 8px 0;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid var(--accent);
            color: var(--black);
            background: var(--white);
            box-shadow: 0 0 8px var(--primary);
            transition: border 0.2s, box-shadow 0.2s;
        }
        button, .btn {
            font-family: 'Bangers', cursive;
            background: var(--primary);
            color: var(--white);
            border: 3px solid var(--accent);
            cursor: pointer;
            text-shadow: 1px 1px 0 var(--black);
        }
        button:hover, .btn:hover {
            background: var(--accent);
            color: var(--gold);
            box-shadow: 0 0 14px var(--gold);
        }
        /* Gallery grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 18px;
        }
        /* 80's icon art */
        .icon-80s {
            font-size: 2.2em;
            color: var(--accent);
            text-shadow: 2px 2px 0 var(--gold), 0 0 14px var(--primary);
            margin-right: 8px;
        }
        /* 80's admin instructions */
        aside.instructions-80s {
            flex: 1 1 320px;
            min-width: 270px;
            margin-left: 32px;
            border-left: 4px dotted var(--accent);
            padding-left: 18px;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 80%);
            color: var(--black);
            font-family: 'Permanent Marker', 'Bangers', cursive;
            box-shadow: 0 0 18px var(--purple);
        }
        aside.instructions-80s h3 {
            color: var(--gold);
            font-family: 'Bungee', cursive;
            text-shadow: 2px 2px 0 var(--accent);
        }
        aside.instructions-80s ul {
            margin-left: 0;
            padding-left: 16px;
        }
        aside.instructions-80s li {
            margin: 10px 0;
            font-size: 1.1em;
        }
        aside.instructions-80s hr {
            border: none;
            border-top: 2px dashed var(--primary);
            margin: 14px 0;
        }
        /* MOBILE STYLES */
        @media (max-width: 900px) {
            aside.instructions-80s { margin-left: 0; border-left: none; padding-left: 0; }
            div[style*="display: flex"] { flex-wrap: wrap; }
            .card { margin-right: 0; }
        }
        @media (max-width: 600px) {
            aside.instructions-80s { margin-top: 18px; }
            .card { padding: 10px; }
        }
        @media (max-width: 480px) {
            header h1 { font-size: 2em; }
            .card { padding: 8px; }
            .youtube-video { min-width: 140px; max-width: 99vw; }
            .youtube-container { flex-direction: column; gap: 18px; }
            .grid { grid-template-columns: 1fr; }
            table { font-size: 0.95em; }
        }
        input, textarea, button {
            box-sizing: border-box;
            width: 100%;
            max-width: 320px;
            margin-bottom: 6px;
        }
        fieldset { border-radius: 8px; margin-bottom: 12px; }
        legend { font-size:1.15em; }
        /* DARK MODE */
        body.dark-mode {
            background: linear-gradient(135deg, #222 0%, #2c2c2c 100%);
            color: #FFD700;
        }
        body.dark-mode header {
            background: linear-gradient(90deg, #222, #444, #7C2AE8);
            color: #FFD700;
            text-shadow: 2px 2px 0 #000, 0 0 8px #7C2AE8;
        }
        body.dark-mode nav ul {
            background: linear-gradient(90deg, #333 0%, #7C2AE8 100%);
            box-shadow: 0 2px 16px #222;
        }
        body.dark-mode nav ul li a,
        body.dark-mode nav ul li button {
            color: #FFD700;
            background: #444;
            border-color: #FFD700;
            box-shadow: 0 0 8px #7C2AE8;
        }
        body.dark-mode nav ul li a:hover,
        body.dark-mode nav ul li button:hover {
            color: #7C2AE8;
            background: #FFD700;
            box-shadow: 0 0 16px #FFD700;
        }
        body.dark-mode .card {
            background: linear-gradient(135deg, #2c2c2c 0%, #222 100%);
            color: #FFD700;
            border-color: #7C2AE8;
            box-shadow: 0 0 24px #FFD700, 0 4px 24px #222;
        }
        body.dark-mode th {
            background: #222;
            color: #FFD700;
            border-bottom: 3px solid #FFD700;
        }
        body.dark-mode td {
            color: #FFD700;
        }
        body.dark-mode input,
        body.dark-mode textarea,
        body.dark-mode button {
            background: #333;
            color: #FFD700;
            border-color: #7C2AE8;
        }
        body.dark-mode .btn {
            background: #7C2AE8;
            color: #FFD700;
            border-color: #FFD700;
        }
        body.dark-mode .btn:hover {
            background: #FFD700;
            color: #7C2AE8;
            box-shadow: 0 0 14px #7C2AE8;
        }
        body.dark-mode .youtube-video {
            background: #222;
            border-color: #FFD700;
            box-shadow: 0 0 24px #FFD700;
        }
        body.dark-mode .schedule-table-container {
            background: linear-gradient(90deg, #222 0%, #7C2AE8 100%);
            box-shadow: 0 2px 12px #FFD700;
        }
        body.dark-mode .instructions-80s {
            background: linear-gradient(135deg, #222 0%, #7C2AE8 80%);
            color: #FFD700;
            box-shadow: 0 0 18px #FFD700;
        }
    </style>
</head>
<body>
    <header>
        <h1>
            <span class="fa-solid fa-basketball icon-80s"></span>
            Willowdale Basketball
        </h1>
    </header>
    <div id="hamburger"><i class="fa-solid fa-bars"></i></div>
    <nav id="nav-menu">
        <ul>
            <li><a href="#home" data-section="home"><span class="fa-solid fa-home icon-80s"></span>Home</a></li>
            <li><a href="#roster" data-section="roster"><span class="fa-solid fa-users icon-80s"></span>Roster</a></li>
            <li><a href="#schedule" data-section="schedule"><span class="fa-solid fa-calendar-days icon-80s"></span>Schedule</a></li>
            <li><a href="#stats" data-section="stats"><span class="fa-solid fa-chart-bar icon-80s"></span>Stats</a></li>
            <li><a href="#gallery" data-section="gallery"><span class="fa-solid fa-image icon-80s"></span>Gallery</a></li>
            <li><a href="#comics" data-section="comics"><span class="fa-solid fa-book-open icon-80s"></span>Comics</a></li>
            <li><a href="#admin" data-section="admin"><span class="fa-solid fa-user-lock icon-80s"></span>Admin</a></li>
            <li><button type="button" id="dark-mode-toggle"><span class="fa-solid fa-lightbulb icon-80s"></span>Toggle Dark Mode</button></li>
        </ul>
    </nav>
    <div id="main-content"></div>
    <script type="module">
    document.addEventListener('DOMContentLoaded', () => {
        // Hamburger menu
        const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('nav-menu');
        hamburger.onclick = function() {
            navMenu.style.display = (navMenu.style.display === 'block' ? 'none' : 'block');
        };

        // Navigation links
        document.querySelectorAll('#nav-menu ul li a[data-section]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                let section = this.getAttribute('data-section');
                window.location.hash = '#' + section;
                // Hide nav on mobile after click
                if (window.innerWidth < 768) {
                    navMenu.style.display = 'none';
                }
            });
        });

        // Dark mode toggle (now works!)
        document.getElementById('dark-mode-toggle').onclick = function() {
            document.body.classList.toggle('dark-mode');
        };

        // SPA section loader
        async function loadSection(section) {
            if (section === "home") {
                renderHomeSection();
                return;
            }
            try {
                const res = await fetch(`sections/${section}.html`);
                if (!res.ok) throw new Error("Section not found");
                const html = await res.text();
                document.getElementById('main-content').innerHTML = html;
                callSectionRenderer(section);
            } catch (e) {
                document.getElementById('main-content').innerHTML = "<section><h2>Section not found</h2></section>";
            }
        }

        // Data storage from localStorage
        let news = JSON.parse(localStorage.getItem('news')) || [];
        let players = JSON.parse(localStorage.getItem('players')) || [];
        let games = JSON.parse(localStorage.getItem('games')) || [];
        let stats = JSON.parse(localStorage.getItem('stats')) || {};
        let gallery = JSON.parse(localStorage.getItem('gallery')) || [];
        let youtubeVideos = JSON.parse(localStorage.getItem('youtubeVideos')) || [
            "https://www.youtube.com/embed/Ke90Tje7VS0",
            "https://www.youtube.com/embed/dQw4w9WgXcQ"
        ];
        const adminPassword = 'admin123';

        function renderNewsSection(newsArr) {
            const feed = document.getElementById('news-feed');
            if (feed) {
                feed.innerHTML = '';
                newsArr.forEach(item => {
                    let p = document.createElement('p');
                    p.textContent = item;
                    feed.appendChild(p);
                });
            }
        }
        function renderRosterSection(playersArr) {
            const list = document.getElementById('roster-list');
            if (list) {
                list.innerHTML = '';
                playersArr.forEach(player => {
                    let card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `<h3><span class="fa-solid fa-user icon-80s"></span>${player.name}</h3>
                        <p>Position: <b>${player.pos}</b></p>
                        <img src="${player.img}" alt="${player.name}" style="width:100%;max-width:220px;">
                        <p>${player.bio}</p>
                        <button type="button" onclick="shareLink('/player/${player.name.replace(/\s/g, '-')}')" class="btn"><span class="fa-solid fa-share icon-80s"></span>Share Profile</button>`;
                    list.appendChild(card);
                });
            }
        }
        function renderScheduleSection(gamesArr) {
            const body = document.querySelector('#schedule-table tbody');
            if (body) {
                body.innerHTML = '';
                gamesArr.forEach(game => {
                    let now = new Date();
                    let gameDate = new Date(game.date);
                    let trClass = gameDate < now ? "past-game" : "future-game";
                    let row = document.createElement('tr');
                    row.className = trClass;
                    row.innerHTML = `<td>${game.date}</td><td>${game.opp}</td><td>${game.loc}</td><td>${game.res}</td>`;
                    body.appendChild(row);
                });
            }
        }
        function renderStatsSection(statsObj) {
            const body = document.querySelector('#stats-table tbody');
            if (body) {
                body.innerHTML = '';
                for (let player in statsObj) {
                    let row = document.createElement('tr');
                    row.innerHTML = `<td><span class="fa-solid fa-user icon-80s"></span>${player}</td><td>${statsObj[player].pts}</td><td>${statsObj[player].reb}</td><td>${statsObj[player].ast}</td>`;
                    body.appendChild(row);
                }
            }
        }
        function renderGallerySection(galleryArr) {
            const grid = document.getElementById('gallery-grid');
            if (grid) {
                grid.innerHTML = '';
                galleryArr.forEach(imgObj => {
                    let card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `<img src="${imgObj.url}" alt="Gallery Image" style="width:100%;">
                        <div style="margin-top:8px;color:var(--gold);font-family:'Permanent Marker',cursive;">${imgObj.date || ""}</div>`;
                    grid.appendChild(card);
                });
            }
        }
        function callSectionRenderer(sectionId) {
            switch (sectionId) {
                case 'home': renderHomeSection(); break;
                case 'roster': renderRosterSection(players); break;
                case 'schedule': renderScheduleSection(games); break;
                case 'stats': renderStatsSection(stats); break;
                case 'gallery': renderGallerySection(gallery); break;
                case 'comics': break;
            }
        }

        // Roster filter
        window.filterRoster = function() {
            let input = document.getElementById('roster-search').value.toLowerCase();
            let cards = document.querySelectorAll('#roster-list .card');
            cards.forEach(card => {
                let name = card.querySelector('h3').textContent.toLowerCase();
                card.style.display = name.includes(input) ? 'block' : 'none';
            });
        };
        // Admin login
        window.loginAdmin = function() {
            let pass = document.getElementById('admin-pass').value;
            if (pass === adminPassword) {
                document.getElementById('admin-login').style.display = 'none';
                document.getElementById('admin-forms').style.display = 'block';
            } else {
                alert('Incorrect password');
            }
        };
        window.addNews = function() {
            let text = document.getElementById('news-text').value;
            if (text) {
                news.push(text);
                localStorage.setItem('news', JSON.stringify(news));
                renderNewsSection(news);
                document.getElementById('news-text').value = '';
            }
        };
        window.addPlayer = function() {
            let name = document.getElementById('player-name').value;
            let pos = document.getElementById('player-pos').value;
            let bio = document.getElementById('player-bio').value;
            let img = document.getElementById('player-img').value;
            if (name && pos) {
                players.push({name, pos, bio, img});
                localStorage.setItem('players', JSON.stringify(players));
                renderRosterSection(players);
                document.getElementById('player-name').value = '';
                document.getElementById('player-pos').value = '';
                document.getElementById('player-bio').value = '';
                document.getElementById('player-img').value = '';
            }
        };
        window.addGame = function() {
            let date = document.getElementById('game-date').value;
            let opp = document.getElementById('game-opp').value;
            let loc = document.getElementById('game-loc').value;
            let res = document.getElementById('game-res').value;
            if (date && opp) {
                games.push({date, opp, loc, res});
                localStorage.setItem('games', JSON.stringify(games));
                renderScheduleSection(games);
                document.getElementById('game-date').value = '';
                document.getElementById('game-opp').value = '';
                document.getElementById('game-loc').value = '';
                document.getElementById('game-res').value = '';
            }
        };
        window.updateStats = function() {
            let player = document.getElementById('stats-player').value;
            let pts = document.getElementById('stats-pts').value;
            let reb = document.getElementById('stats-reb').value;
            let ast = document.getElementById('stats-ast').value;
            if (player) {
                stats[player] = {pts, reb, ast};
                localStorage.setItem('stats', JSON.stringify(stats));
                renderStatsSection(stats);
                document.getElementById('stats-player').value = '';
                document.getElementById('stats-pts').value = '';
                document.getElementById('stats-reb').value = '';
                document.getElementById('stats-ast').value = '';
            }
        };
        window.addImage = function() {
            let img = document.getElementById('gallery-img').value;
            let date = document.getElementById('gallery-date') ? document.getElementById('gallery-date').value : "";
            if (img) {
                gallery.push({date, url: img});
                localStorage.setItem('gallery', JSON.stringify(gallery));
                renderGallerySection(gallery);
                document.getElementById('gallery-img').value = '';
                if(document.getElementById('gallery-date')) document.getElementById('gallery-date').value = '';
            }
        };
        window.exportData = function() {
            let data = {news, players, games, stats, gallery, youtubeVideos};
            let blob = new Blob([JSON.stringify(data)], {type: 'application/json'});
            let url = URL.createObjectURL(blob);
            let a = document.createElement('a');
            a.href = url;
            a.download = 'team-data.json';
            a.click();
        };
        window.shareLink = function(path) {
            let url = window.location.origin + path;
            if (navigator.share) {
                navigator.share({title: 'Share Profile', url});
            } else {
                alert('Share this link: ' + url);
            }
        };
        window.addYouTubeVideo = function() {
            let url = document.getElementById('youtube-url').value;
            if (url) {
                youtubeVideos.unshift(url);
                youtubeVideos = youtubeVideos.slice(0,2);
                localStorage.setItem('youtubeVideos', JSON.stringify(youtubeVideos));
                document.getElementById('youtube-url').value = '';
                renderHomeSection();
            }
        };

        // Interactive Home Section
        function renderHomeSection() {
            let videos = JSON.parse(localStorage.getItem('youtubeVideos')) || youtubeVideos;
            if (!Array.isArray(videos)) videos = [];
            while (videos.length < 2) videos.push("");
            let now = new Date(), past = [], future = [];
            games.forEach(g => {
                let d = new Date(g.date);
                if (d < now) past.push(g);
                else future.push(g);
            });
            past.sort((a,b) => new Date(b.date)-new Date(a.date));
            future.sort((a,b) => new Date(a.date)-new Date(b.date));
            let recentPast = past.slice(0,1);
            let homeHtml = `
                <div class="youtube-container">
                    <div class="youtube-video">
                        <iframe width="100%" height="250" src="${videos[0]}" frameborder="0" allowfullscreen></iframe>
                        <div>Featured Video <span class="fa-brands fa-youtube icon-80s"></span></div>
                    </div>
                    <div class="youtube-video">
                        <iframe width="100%" height="250" src="${videos[1]}" frameborder="0" allowfullscreen></iframe>
                        <div>Previous Video <span class="fa-brands fa-youtube icon-80s"></span></div>
                    </div>
                </div>
                <div class="schedule-table-container">
                    <h3><span class="fa-solid fa-calendar-days icon-80s"></span>Game Schedule & Results</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Opponent</th>
                                <th>Location</th>
                                <th>Result</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${recentPast.map(g => `
                            <tr class="past-game">
                                <td>${g.date}</td>
                                <td>${g.opp}</td>
                                <td>${g.loc}</td>
                                <td>${g.res || ""}</td>
                            </tr>
                            `).join("")}
                            ${future.map(g => `
                            <tr class="future-game">
                                <td>${g.date}</td>
                                <td>${g.opp}</td>
                                <td>${g.loc}</td>
                                <td>${g.res || ""}</td>
                            </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
            `;
            document.getElementById('main-content').innerHTML = homeHtml;
        }

        // SPA hash navigation
        function onHashChange() {
            let section = (window.location.hash || '#home').replace(/^#/, '');
            loadSection(section);
        }
        window.addEventListener('hashchange', onHashChange);

        // Initial load
        onHashChange();
    });
    </script>
</body>
</html>